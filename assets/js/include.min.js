!function(e,t,i){e(function(){o.init(),a.Init(),r.init(),e(i).keyup(function(t){27==t.keyCode&&e(r.className).hasClass(r.activeClass)?r.close():27==t.keyCode&&e(n.className).hasClass(n.activeClass)&&n.close()})}),e(t).on("load",function(){n.init(".header__menu")});var n={className:".js_mobile-nav",copyClassName:".js_mobile-nav_copy",mobileMenuClassName:".mobile-nav__menu",activeClass:"open",init:function(t){e(this.mobileMenuClassName).children().length||e(t).children().clone().prependTo(this.mobileMenuClassName),e(i).on("click",".burger",function(){n.toggle()})},open:function(){e(this.className).addClass(this.activeClass)},close:function(){e(this.className).removeClass(this.activeClass)},toggle:function(){e(this.className).hasClass(this.activeClass)?this.close():this.open()}},o={option:{formClass:".md-form"},init:function(){for(var e=this,t=i.querySelectorAll(e.option.formClass),n=0;n<t.length;n++)t[n].addEventListener("submit",e.initActions)},initActions:function(t){t.preventDefault();var i=t.target;if(o.validForm(i)){var n=e(i).serialize(),s=e(i).attr("action");e.ajax({url:s,data:n,type:"POST",success:function(t){swal("Спасибо!","Ваша заявка успешно отправлена - мы свяжемся с вами в ближайшее время!","success"),e(i).find('input:not([type="submit"])').each(function(){e(this).val("")})}})}},validForm:function(t){var i={user_name:e(t).find("#user_name").val(),user_email:e(t).find("#user_mail").val(),user_tel:e(t).find("#user_tel").val(),user_work:e(t).find("#user_work").val()},n=new LIVR.Validator({user_name:"required",user_email:["required","email"],user_tel:["required","integer",{max_length:15},{min_length:10}],user_work:"required"}),o={user_name:"Ім'я",user_email:"Пошта",user_tel:"Телефон",user_work:"Cфера діяльності",REQUIRED:"Обов'язкове для заповнення",TOO_SHORT:"Надто короткий телефон",TOO_LONG:"Надто довгий телефон",NOT_INTEGER:"Допустимі тільки цифри"};if(n.validate(i))return!0;var s=n.getErrors(),a="";for(var r in s)s.hasOwnProperty(r)&&(a+="Поле "+o[r]+" - "+o[s[r]]+"\n");swal("Форма заповнена із помилками!",a,"error")}},s=new ScrollMagic.Controller,a={Init:function(){this.PageLoad(),this.NavTransition(),this.Scroll(),this.AnimateSlogan(),this.ScrollOnLoad(),this.ScrollOnTop(),t.innerWidth>767&&this.AnimateTitles(),this.VideoText(),this.StickyNav(),this.SmoothScrolling(),this.SelectCustom()},ScrollOnTop:function(){e(t).on("scroll",function(){e(this).scrollTop()>300?e("#scroller").fadeIn():e("#scroller").fadeOut()}),e("#scroller").on("click",function(){return e("body,html").stop().animate({scrollTop:0},1500),!1})},ScrollOnLoad:function(){if(location.search){var t=location.search;t="#"+t.substring(1);var i=e(t);e("html, body").stop().animate({scrollTop:i.offset().top},1500)}},Scroll:function(){var i=new TimelineMax;i.to("#image-container #layer-2",1,{opacity:1}).to("#image-container #layer-3",1,{opacity:1});new ScrollMagic.Scene({triggerElement:"#pin-container",triggerHook:0,duration:1*e(t).height()}).setPin("#pin-container").setTween(i).addTo(s)},SelectCustom:function(){e("select").selectize()},AnimateCanvas:function(){function e(e){function i(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function n(){c.clearRect(0,0,d,f)}function o(e,t){this.x=e||i(0,d),this.y=t||i(0,f),this.speed=m.speed,this.vx=Math.cos(i(0,360))*this.speed,this.vy=Math.sin(i(0,360))*this.speed,this.r=m.radius,this.color=m.shapecolor,this.opacity=m.circleopacity,this.draw=function(){c.beginPath(),c.globalCompositeOperation="source-over",c.globalAlpha=this.opacity,c.arc(this.x,this.y,this.r,0,2*Math.PI,!1),c.closePath(),c.fillStyle=this.color,c.fill()},this.move=function(){this.x+=this.vx,this.y+=this.vy,(this.x>=d||this.x<=0)&&(this.vx*=-1),(this.y>=f||this.y<=0)&&(this.vy*=-1),this.x>d?this.x=d:this.x,this.y>f?this.y=f:this.y,this.x<0?this.x=0:this.x,this.y<0?this.y=0:this.y}}function s(e,t){for(var i=0;i<t.length;i++){var n=e.y-t[i].y,o=e.x-t[i].x,s=Math.sqrt(o*o+n*n);s<m.distance&&(c.beginPath(),c.globalAlpha=1-s/m.distance,c.globalCompositeOperation="destination-over",c.lineWidth=1,c.moveTo(e.x,e.y),c.lineTo(t[i].x,t[i].y),c.strokeStyle=m.shapecolor,c.lineCap="round",c.closePath(),c.stroke())}}function a(){n(),h[0].x=r,h[0].y=l,h[0].move(),h[0].draw();for(var e=1;e<h.length;e++)h[e].move(),h[e].draw(),s(h[e],h);t.requestAnimationFrame(a)}var r,l,c=e.getContext("2d"),h=[],u=50,m={shapecolor:"#2e2e2e",radius:5,distance:200,circleopacity:2,speed:.4},d=e.width=t.innerWidth,f=e.height=t.innerHeight;addEventListener("resize",function(){d=e.width=t.innerWidth,f=e.height=t.innerHeight}),function(){for(var e=0;e<u;e++)h.push(new o);t.requestAnimationFrame(a)}()}var n=i.getElementsByClassName("anim-canvas");[].forEach.call(n,function(t){e(t)})},AnimateTitles:function(){e(".sc__title").each(function(){var e=new TimelineMax;e.fromTo(this,.5,{x:-500,opacity:0},{x:0,opacity:1}),new ScrollMagic.Scene({triggerElement:this,triggerHook:.3,offset:-500}).setTween(e).addTo(s)})},VideoText:function(){e(".video__text").each(function(){var e=new TimelineMax;e.fromTo(this,.5,{y:300,opacity:0},{y:0,opacity:1}),new ScrollMagic.Scene({triggerElement:"#videosc .container",triggerHook:"onLeave",offset:-200}).setTween(e).addTo(s)})},PageLoad:function(){setTimeout(function(){e("body").removeClass("is-pagetransition")},100),setTimeout(function(){e("body").addClass("is-pagetransitionend"),e(".loader-overlay").hide()},1400)},StickyNav:function(){var n,o=0,s=e(i),a=e(t),r=e(".js-navbar");e(t).scrollTop()>700?r.addClass("show-bg"):r.removeClass("show-bg"),n=Modernizr.touch?150:25,a.scroll(function(){var t=e(this).scrollTop();Math.abs(o-t)>=n&&t>0&&(t>o&&s.height()-(s.scrollTop()+a.height())>50?r.addClass("is-hidden"):r.removeClass("is-hidden"),t>700?r.addClass("show-bg"):r.removeClass("show-bg"),o=t)})},NavTransition:function(){e(".js-link, .header__logo").on("click",function(i){i.preventDefault();var n=e(this).attr("href");e(".loader-overlay").show(),e("body").removeClass("is-pagetransitionend"),e("body").addClass("is-pagetransition"),setTimeout(function(){t.location.href=n},600)})},AnimateSlogan:function(){function t(){for(var t=0;t<o.length;t++)!function(t){setTimeout(function(){0===t?n.css("color","#fff"):n.css("color","#f7901e");var i=o[t].split("").map(function(e){return"<i>"+e+"</i>"}).join("");n.html(i).find("i").each(function(t){var i=e(this);setTimeout(function(){i.addClass("is-visible")},100*(t+1))})},t*s)}(t)}var i=e("#welcome-slogan"),n=i.find(".is-animate"),o=["City","Живи","Працюй","Навчайся","Відпочивай"],s=4e3;t(),setInterval(function(){t()},o.length*s)},AnimateIcons:function(){if(!Modernizr.touchevents){var e=new TimelineMax;e.add([TweenMax.to(".js-ic-a__icon--circle",1,{marginLeft:"-49%",marginTop:"42%",rotation:360}),TweenMax.to(".js-ic-a__icon--rhomb",1,{marginLeft:"-23.5%",marginTop:"31%",rotation:360}),TweenMax.to(".js-ic-a__icon--star",1,{marginLeft:"1%",marginTop:"20%",rotation:360}),TweenMax.to(".js-ic-a__icon--stop",1,{marginLeft:"26%",marginTop:"9%",rotation:360})]),new ScrollMagic.Scene({triggerElement:".js-ic-a",duration:400}).setTween(e).addTo(s)}},SmoothScrolling:function(){e(i).on("click touchstart","a.page-scroll",function(t){t.preventDefault(),e(".js_mobile-nav").removeClass("open");var i=e(this);e("html, body").stop().animate({scrollTop:e(i.attr("href")).offset().top},1500)})}},r={$self:e(this),className:".modal__video",linkClassName:".modal__link",modalBtn:".modal__close",activeClass:"open",init:function(){e(i).on("click",this.linkClassName,function(t){t.preventDefault(),r.open(e(this).data("url"))}),e(i).on("click",this.modalBtn,function(){r.close()})},open:function(t){e(this.className).addClass(this.activeClass),t=r.youtubeParser(t),t="//www.youtube.com/embed/"+t+"?autoplay=1",e(this.className).prepend(e("<iframe />").attr({width:"100%",height:"100%",src:t,frameborder:0,allowfullscreen:""}))},close:function(){e(this.className).removeClass(this.activeClass),e(this.className).find("iframe").remove()},toggle:function(){e(this.className).hasClass(this.activeClass)?this.close():this.open()},youtubeParser:function(e){var t=e.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/);return!(!t||11!=t[7].length)&&t[7]}}}(window.jQuery,window,document);